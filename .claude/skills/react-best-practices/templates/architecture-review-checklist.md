# React 架构评审清单（Architecture Review Checklist）

**项目名称**: _______________________
**评审日期**: YYYY-MM-DD
**评审人**: _______________________
**代码版本**: _______________________

---

## 使用说明

本清单用于系统化地评审 React 项目架构和代码质量。每个检查项标记为：

- ✅ **通过** - 符合要求
- ❌ **不通过** - 不符合要求，需要修改
- ⚠️ **警告** - 可以接受，但建议改进
- N/A **不适用** - 该检查项不适用于本项目

---

## 1. 项目结构

### 1.1 目录组织

| 检查项 | 状态 | 备注 |
|--------|------|------|
| 使用 Feature-Based 架构 | [ ] | |
| 目录层级不超过 5 层 | [ ] | |
| 组件按功能分组 | [ ] | |
| UI 组件独立目录（components/ui/）| [ ] | |
| 布局组件独立目录（components/layout/）| [ ] | |
| 通用组件独立目录（components/common/）| [ ] | |

### 1.2 文件命名

| 检查项 | 状态 | 备注 |
|--------|------|------|
| 组件文件使用 kebab-case | [ ] | |
| 类型文件使用 .ts 扩展名 | [ ] | |
| 组件文件使用 .tsx 扩展名 | [ ] | |
| 测试文件使用 .test.tsx 后缀 | [ ] | |
| 样式文件（如有）使用对应组件名 | [ ] | |

---

## 2. 组件设计

### 2.1 组件规范

| 检查项 | 状态 | 备注 |
|--------|------|------|
| 使用函数组件 | [ ] | |
| 组件名使用 PascalCase | [ ] | |
| Props 接口定义清晰 | [ ] | |
| Props 使用 TypeScript 类型 | [ ] | |
| 组件职责单一 | [ ] | |
| 组件大小合理（< 200 行）| [ ] | |

### 2.2 组件拆分

| 检查项 | 状态 | 备注 |
|--------|------|------|
| 复杂组件拆分为子组件 | [ ] | |
| 可复用组件抽取为独立文件 | [ ] | |
| 避免过度嵌套（< 5 层）| [ ] | |
| 使用组合而非继承 | [ ] | |

### 2.3 Props 设计

| 检查项 | 状态 | 备注 |
|--------|------|------|
| Props 类型明确定义 | [ ] | |
| 可选 Props 使用 ? 标记 | [ ] | |
| 回调函数以 on 开头命名 | [ ] | |
| 避免传递过多 Props（< 8 个）| [ ] | |
| children 类型正确定义 | [ ] | |

---

## 3. TypeScript 使用

### 3.1 类型定义

| 检查项 | 状态 | 备注 |
|--------|------|------|
| 所有 Props 定义类型 | [ ] | |
| 所有状态定义类型 | [ ] | |
| API 响应定义类型 | [ ] | |
| 避免使用 any | [ ] | |
| 使用 interface 或 type 定义复杂类型 | [ ] | |
| 类型文件独立管理（types/）| [ ] | |

### 3.2 类型安全

| 检查项 | 状态 | 备注 |
|--------|------|------|
| 启用 strict 模式 | [ ] | |
| 无 TypeScript 错误 | [ ] | |
| 无 @ts-ignore（除非必要）| [ ] | |
| 使用类型守卫 | [ ] | |

---

## 4. Hooks 使用

### 4.1 内置 Hooks

| 检查项 | 状态 | 备注 |
|--------|------|------|
| useState 使用合理 | [ ] | |
| useEffect 依赖数组正确 | [ ] | |
| useCallback 用于回调函数 | [ ] | |
| useMemo 用于昂贵计算 | [ ] | |
| useRef 用于 DOM 引用或可变值 | [ ] | |
| 遵循 Hooks 规则（不在循环/条件中调用）| [ ] | |

### 4.2 自定义 Hooks

| 检查项 | 状态 | 备注 |
|--------|------|------|
| 业务逻辑抽取为自定义 Hooks | [ ] | |
| Hooks 命名以 use 开头 | [ ] | |
| Hooks 职责单一 | [ ] | |
| Hooks 有清晰的返回值类型 | [ ] | |
| Hooks 文件独立管理（hooks/）| [ ] | |

---

## 5. 状态管理

### 5.1 本地状态

| 检查项 | 状态 | 备注 |
|--------|------|------|
| 优先使用 useState | [ ] | |
| 状态提升合理 | [ ] | |
| 避免不必要的全局状态 | [ ] | |
| 使用 useReducer 处理复杂状态 | [ ] | |

### 5.2 全局状态

| 检查项 | 状态 | 备注 |
|--------|------|------|
| 服务端状态使用 TanStack Query | [ ] | |
| 客户端状态使用 Zustand/Jotai | [ ] | |
| 状态管理方案统一 | [ ] | |
| 避免状态冗余 | [ ] | |

### 5.3 TanStack Query

| 检查项 | 状态 | 备注 |
|--------|------|------|
| QueryClient 正确配置 | [ ] | |
| queryKey 命名规范 | [ ] | |
| 使用 useQuery 获取数据 | [ ] | |
| 使用 useMutation 修改数据 | [ ] | |
| 正确处理 loading/error 状态 | [ ] | |
| 合理使用缓存策略 | [ ] | |

---

## 6. 数据获取

### 6.1 API 客户端

| 检查项 | 状态 | 备注 |
|--------|------|------|
| 使用统一的 API 客户端 | [ ] | |
| 配置请求拦截器 | [ ] | |
| 配置响应拦截器 | [ ] | |
| 处理认证 Token | [ ] | |
| 统一错误处理 | [ ] | |

### 6.2 API 服务层

| 检查项 | 状态 | 备注 |
|--------|------|------|
| API 调用封装为服务层 | [ ] | |
| 服务层按功能模块组织 | [ ] | |
| API 函数有明确的类型定义 | [ ] | |
| 错误处理完整 | [ ] | |

---

## 7. 表单处理

### 7.1 表单库使用

| 检查项 | 状态 | 备注 |
|--------|------|------|
| 使用 React Hook Form | [ ] | |
| 使用 Zod 进行验证 | [ ] | |
| 表单字段有类型定义 | [ ] | |
| 表单验证规则清晰 | [ ] | |

### 7.2 表单体验

| 检查项 | 状态 | 备注 |
|--------|------|------|
| 实时验证反馈 | [ ] | |
| 错误提示清晰 | [ ] | |
| Loading 状态明确 | [ ] | |
| 提交成功反馈 | [ ] | |
| 防止重复提交 | [ ] | |

---

## 8. 路由管理

### 8.1 路由配置

| 检查项 | 状态 | 备注 |
|--------|------|------|
| 使用 React Router v6 | [ ] | |
| 路由配置集中管理 | [ ] | |
| 嵌套路由使用合理 | [ ] | |
| 路由懒加载 | [ ] | |
| 404 页面 | [ ] | |

### 8.2 路由守卫

| 检查项 | 状态 | 备注 |
|--------|------|------|
| 实现认证路由守卫 | [ ] | |
| 实现权限路由守卫 | [ ] | |
| 重定向逻辑正确 | [ ] | |

---

## 9. 样式规范

### 9.1 Tailwind CSS

| 检查项 | 状态 | 备注 |
|--------|------|------|
| 使用 Tailwind CSS | [ ] | |
| 配置文件完整 | [ ] | |
| 主题配置合理 | [ ] | |
| 使用 cn 工具函数 | [ ] | |
| 避免过长的 className | [ ] | |

### 9.2 shadcn/ui

| 检查项 | 状态 | 备注 |
|--------|------|------|
| shadcn/ui 正确配置 | [ ] | |
| 组件按需安装 | [ ] | |
| 组件使用规范 | [ ] | |
| 主题定制合理 | [ ] | |

### 9.3 响应式设计

| 检查项 | 状态 | 备注 |
|--------|------|------|
| 移动端适配 | [ ] | |
| 使用响应式断点 | [ ] | |
| 图片响应式处理 | [ ] | |

---

## 10. 性能优化

### 10.1 组件优化

| 检查项 | 状态 | 备注 |
|--------|------|------|
| 合理使用 React.memo | [ ] | |
| 合理使用 useMemo | [ ] | |
| 合理使用 useCallback | [ ] | |
| 避免不必要的重渲染 | [ ] | |
| 列表使用唯一 key | [ ] | |

### 10.2 代码分割

| 检查项 | 状态 | 备注 |
|--------|------|------|
| 路由级别代码分割 | [ ] | |
| 组件懒加载 | [ ] | |
| Suspense 配置 | [ ] | |
| Loading 组件 | [ ] | |

### 10.3 资源优化

| 检查项 | 状态 | 备注 |
|--------|------|------|
| 图片懒加载 | [ ] | |
| 图片格式优化 | [ ] | |
| 虚拟滚动（大列表）| [ ] | |
| Bundle 大小合理 | [ ] | |

---

## 11. 错误处理

### 11.1 错误边界

| 检查项 | 状态 | 备注 |
|--------|------|------|
| 实现 Error Boundary | [ ] | |
| 错误日志记录 | [ ] | |
| 错误页面友好 | [ ] | |
| 错误恢复机制 | [ ] | |

### 11.2 异常处理

| 检查项 | 状态 | 备注 |
|--------|------|------|
| API 错误统一处理 | [ ] | |
| 错误提示清晰 | [ ] | |
| Try-Catch 使用合理 | [ ] | |
| 避免静默失败 | [ ] | |

---

## 12. 用户体验

### 12.1 Loading 状态

| 检查项 | 状态 | 备注 |
|--------|------|------|
| 数据加载显示 Loading | [ ] | |
| 骨架屏使用 | [ ] | |
| 操作反馈及时 | [ ] | |
| 防止闪烁（延迟显示）| [ ] | |

### 12.2 交互反馈

| 检查项 | 状态 | 备注 |
|--------|------|------|
| Toast 通知 | [ ] | |
| 确认对话框 | [ ] | |
| 成功/失败反馈 | [ ] | |
| 表单验证提示 | [ ] | |

### 12.3 无障碍访问

| 检查项 | 状态 | 备注 |
|--------|------|------|
| 语义化 HTML | [ ] | |
| ARIA 属性 | [ ] | |
| 键盘导航 | [ ] | |
| 屏幕阅读器友好 | [ ] | |

---

## 13. 测试

### 13.1 单元测试

| 检查项 | 状态 | 备注 |
|--------|------|------|
| 使用 Vitest | [ ] | |
| 使用 React Testing Library | [ ] | |
| 关键组件有测试 | [ ] | |
| 关键 Hooks 有测试 | [ ] | |
| 工具函数有测试 | [ ] | |
| 测试覆盖率达标（>= 60%）| [ ] | |

### 13.2 测试质量

| 检查项 | 状态 | 备注 |
|--------|------|------|
| 测试用例清晰 | [ ] | |
| 覆盖正常和异常场景 | [ ] | |
| 测试独立运行 | [ ] | |
| 测试速度合理 | [ ] | |
| Mock 使用合理 | [ ] | |

---

## 14. 代码质量

### 14.1 代码规范

| 检查项 | 状态 | 备注 |
|--------|------|------|
| ESLint 配置完整 | [ ] | |
| Prettier 配置完整 | [ ] | |
| 无 ESLint 错误 | [ ] | |
| 无 TypeScript 错误 | [ ] | |
| 代码格式统一 | [ ] | |

### 14.2 代码可读性

| 检查项 | 状态 | 备注 |
|--------|------|------|
| 变量命名清晰 | [ ] | |
| 函数命名清晰 | [ ] | |
| 关键逻辑有注释 | [ ] | |
| 复杂算法有说明 | [ ] | |
| 避免魔法数字 | [ ] | |

---

## 15. 构建和部署

### 15.1 构建配置

| 检查项 | 状态 | 备注 |
|--------|------|------|
| Vite 配置正确 | [ ] | |
| 环境变量配置 | [ ] | |
| 构建成功 | [ ] | |
| Bundle 分析 | [ ] | |

### 15.2 CI/CD

| 检查项 | 状态 | 备注 |
|--------|------|------|
| 自动化测试 | [ ] | |
| 自动化构建 | [ ] | |
| 自动化部署 | [ ] | |
| 代码检查自动化 | [ ] | |

---

## 评审总结

### 优点

1. _______________________________________________
2. _______________________________________________
3. _______________________________________________

### 需要改进

| 问题 | 严重程度 | 建议措施 | 负责人 | 期限 |
|------|----------|----------|--------|------|
| | 高/中/低 | | | |
| | 高/中/低 | | | |
| | 高/中/低 | | | |

### 风险评估

| 风险项 | 影响 | 概率 | 应对措施 |
|--------|------|------|----------|
| | 高/中/低 | 高/中/低 | |
| | 高/中/低 | 高/中/低 | |

### 整体评价

- [ ] 优秀 - 完全符合架构规范，代码质量高
- [ ] 良好 - 基本符合架构规范，少量改进项
- [ ] 及格 - 有明显问题，需要较多改进
- [ ] 不及格 - 严重偏离架构规范，需要大幅重构

### 评审结论

- [ ] 批准 - 可以合并/上线
- [ ] 有条件批准 - 修复指定问题后可合并
- [ ] 需要修改 - 修改后需要重新评审
- [ ] 拒绝 - 需要重新设计

---

## 附录：快速检查清单

对于小型功能，可以使用这个简化版快速检查清单：

### 最小检查项（必须通过）

- [ ] TypeScript 类型定义完整
- [ ] 组件职责单一，大小合理
- [ ] 使用 TanStack Query 管理服务端状态
- [ ] 表单使用 React Hook Form + Zod
- [ ] 通过 ESLint 检查
- [ ] 关键组件有测试
- [ ] Loading 和 Error 状态处理
- [ ] 响应式设计
- [ ] 性能优化（memo/useMemo/useCallback）
- [ ] 代码格式统一（Prettier）

如果以上 10 项全部通过，代码基本符合要求。

---

## 参考资料

- [React 官方文档](https://react.dev/)
- [React TypeScript Cheatsheet](https://react-typescript-cheatsheet.netlify.app/)
- [React Best Practices](https://react.dev/learn/thinking-in-react)
- [shadcn/ui 文档](https://ui.shadcn.com/)
